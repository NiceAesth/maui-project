<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="PROIECT.FacturaPage"
             Title="Facturi Întreținere"
             BackgroundColor="White">

    <Grid RowDefinitions="*, Auto" Padding="20">

        <Label x:Name="emptyLabel"
               Text="Nu există facturi înregistrate."
               Grid.Row="0"
               HorizontalOptions="Center"
               VerticalOptions="Center"
               FontSize="18"
               TextColor="Gray"
               IsVisible="False"/>

        <ListView x:Name="listView" 
                  Grid.Row="0"
                  SeparatorColor="Gray"
                  HasUnevenRows="True"
                  SelectionMode="None">
            <ListView.ItemTemplate>
                <DataTemplate>
                    <ViewCell>
                        <Grid Padding="10" ColumnDefinitions="*, Auto, Auto, Auto">
                            <VerticalStackLayout Grid.Column="0" VerticalOptions="Center">
                                <HorizontalStackLayout Spacing="5">
                                    <Label Text="{Binding Tip}" 
                   FontAttributes="Bold" TextColor="Black" FontSize="18"/>
                                    <Label Text="{Binding NumeApartament, StringFormat='(Ap. {0})'}" 
                   FontAttributes="Bold" TextColor="Black" FontSize="18"/>
                                </HorizontalStackLayout>

                                <Label Text="{Binding Luna}" 
               TextColor="DarkGray" FontSize="14" Margin="0,0,0,5"/>

                                <Label Text="{Binding SumaDePlata, StringFormat='De plată: {0} RON'}" 
               TextColor="{StaticResource Primary}" FontAttributes="Bold"/>
                                <Label Text="{Binding Status, StringFormat='Status: {0}'}" 
               TextColor="Gray" FontSize="Small"/>
                            </VerticalStackLayout>

                            <Button Text="Plătește"
            Grid.Column="1"
            Clicked="OnPlatesteClicked"
            CommandParameter="{Binding .}"
            IsVisible="{Binding EsteNeplatita}" 
            BackgroundColor="Green"
            TextColor="White"
            HeightRequest="40"
            FontSize="12"
            Margin="5,0,0,0"
            VerticalOptions="Center"/>

                            <Button Text="Modifică"
            Grid.Column="2" 
            Clicked="OnEditClicked"
            CommandParameter="{Binding .}"
            IsVisible="{Binding EsteAdmin}" 
            BackgroundColor="Orange"
            TextColor="White"
            HeightRequest="40"
            FontSize="12"
            Margin="5,0,0,0"
            VerticalOptions="Center"/>

                            <Button Text="Șterge"
            Grid.Column="3" 
            Clicked="OnStergeClicked"
            CommandParameter="{Binding .}"
            IsVisible="{Binding EsteAdmin}" 
            BackgroundColor="Red"
            TextColor="White"
            HeightRequest="40"
            FontSize="12"
            Margin="5,0,0,0"
            VerticalOptions="Center"/>
                        </Grid>
                    </ViewCell>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>

        <Button x:Name="addFacturaBtn"
                Text="Emite Factură Nouă"
                Grid.Row="1"
                Clicked="OnAddFacturaClicked"
                BackgroundColor="{StaticResource Primary}"
                TextColor="White"
                CornerRadius="10"
                Margin="0,10,0,0"/>
    </Grid>
</ContentPage>